// jQuery.tpl block plugin v.0.0.2;Copyright 2010, Fedor Indutny;Released under MIT license
(function(i,k,f,h){function l(a,b,d,c,e){e=a[b];if(d){if(!a[b])return a[b]=[d];return e[e[h]]=d}if(e){d=e[0];!c&&e[h]>1&&(a[b]=a[b].slice(1));return d}}function m(a,b,d){b=b;a=f[a].stack;var c,e=a[h]-(d?d:0);for(c=0;c<e;c++)if(!(b=l(b,a[c],k,d)))return;return b}function p(a,b,d,c,e,j){f[c].ext=i.template(b);j=this;a.join=function(g){g=[];j.$p(f[c].ext(i.extend(true,{$blockStack:f[c].args},d)),g);n(c);return Array.prototype.join.call(g,"")}}function q(a,b,d,c,e,j,g){g=f[c].stack;g[g[h]]=d;do{if(!f[c].ext){if(!a.$blockStack||!(j=m(c,a.$blockStack))){a.$p(e,b);break}a.$p(j,b);break}l(b=m(c,f[c].args,1),d,e)}while(k);g[h]--}function n(a,b){f[a]={namespace:b||f[a].namespace,stack:[],args:{}}}function o(a){if(f[a.$gid])return a.$gid;n(a.$gid,a);i.extend(a,{$extends:p,$block:q});return a.$gid}f={};h="length";i.extend(i.template.modificators,{"extends":function(a,b){a=a.split(" ");return["$extends($_,",a[0],",",a[1],",",o(b),");"].join("")},block:function(a,b){return"$block($args,$_,"+a+","+o(b)+",(function($_){"},"/block":function(){return";return $_.join('')})([]));"}})})(jQuery);