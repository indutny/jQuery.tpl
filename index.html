<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<style type="text/css">
		input.placeholder-input-blank {
			color: #ccc;
		}
		.my-form {
			margin-left: auto;
			margin-right: auto;
			width: 300px;
			text-align: center;
		}
		.my-form-label {
			float: left;
			clear: left;
			font-size: 20px;
		}
		.placeholder-input {
			float: right;
			clear: right;
			border:1px solid #333;
			height: 20px;
			margin: 2px;
		}
		.my-form-submit {
			width: 100%;
		}
		.progressbar {
			height: 20px;
			background: white;
		}
		.progressbar div {
			height: 100%;
			width: 0;
			background: blue;
		}
	</style>
	
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="jquery.tpl.js"></script>
	
	<script type="text/html" class="c cb name max id defval" id="placeholder-input">
	{%
		c.normal = c.normal || "";
		c.def = c.def || "";
		c.blank = c.blank || "";
		name = name || "";
		defval = defval || "";
	%}
	{%catch var a%}
		<input type="text" name="{%= name %}" {%= id?'id='+id:'' %} class="{%= c.def + " " + c.blank %}" value="{%= defval %}"/>
	{%/catch%}	
	
	{%: progressbar {
			callback : function (s) {
				cb = s;				
			}
		} %}
	
	{%= (a=$(a)).focus(function() {
		if (a.val() == defval)
			a.removeClass(c.blank).addClass(c.normal).val('');
	}).blur(function () {		
		if (a.val() == '')
			a.removeClass(c.normal).addClass(c.blank).val(defval);
	}).keyup(function () {
		cb ( (a.val().length/(max||1))*100);
	})	%}
	
	</script>
	
	<script type="text/html" class="callback" id="progressbar">
		<div class="progressbar">
			{%catch var a%}<div></div>{%/catch%}
			{%= a=$(a) %}
			{%
			callback(function (value) {
				a.stop().animate({width: value+"%"});
			});
			%}
		</div>
	</script>
	
	<script type="text/html" class="inputs def" id="my-form">
	<div class="my-form">
		<form>
		<h4>Simple example (of jQuery.tpl):</h4>
		
		{%each inputs %}
			<label class="my-form-label">{%= this.title %}:</label>
			{%: placeholder-input $.extend(
					true,
					$.extend(
						{},
						def
					),
					this) %}
			<div style="clear:both"></div>
		{%/each %}
		{%catch var a%}<input type="submit" value="Submit form" class="my-form-submit"/>{%/catch%}
		{%= a=$(a) %}
		{% 
			a.click(function (E) {
				E.preventDefault();
			});
		%}
		</form>
		<br/>
		<small><i>coded by <a href="http://blog.habrastat.ru/">Fedor Indutny</a>, 2010</i></small>
	</div>
	</script>
	<script type="text/javascript">
		$(function () {
			$("#progressbar").render("progressbar");
			$("#placeholder-input").render("placeholder-input");
			
			$('#my-form').render({
				def: {
					a: undefined,
					c: {
						blank: "placeholder-input-blank",
						def: "placeholder-input"
					}
				},
				inputs: [
					{ title: "First name", name: "firstname",  defval: "Adam"},
					{ title: "Second name", name: "secondname",  defval: "Rogers"},
					{ title: "Country", name: "country",  defval: "USA"},
					{ title: "Job", name: "job",  defval: "Coder"}
				]
			}).appendTo('body');
		});
	</script>
	<title>jQuery.tpl plugin's demo site</title>	
</head>
<body >
<script type='text/javascript'> 
var _gaq = _gaq || [];
_gaq.push(
    ['_setAccount', 'UA-15690174-1'],
    ['_setDomainName', 'dev.habrastat.ru'],
    ["_addOrganic", "mail.ru", "q"],
    ["_addOrganic","rambler.ru", "words"],
    ["_addOrganic","nigma.ru", "s"],
    ["_addOrganic","blogs.yandex.ru", "text"],
    ["_addOrganic","webalta.ru", "q"],
    ["_addOrganic","aport.ru", "r"],
    ["_addOrganic","akavita.by", "z"],
    ["_addOrganic","meta.ua", "q"],
    ["_addOrganic","bigmir.net", "q"],
    ["_addOrganic","tut.by", "query"],
    ["_addOrganic","all.by", "query"],
    ["_addOrganic","i.ua", "q"],
    ["_addOrganic","online.ua", "q"],
    ["_addOrganic","a.ua", "s"],
    ["_addOrganic","ukr.net", "search_query"],
    ["_addOrganic","search.com.ua", "q"],
    ["_addOrganic","search.ua", "query"],
    ["_addOrganic","poisk.ru", "text"],
    ["_addOrganic","km.ru", "sq"],
    ["_addOrganic","liveinternet.ru", "ask"],
    ["_addOrganic","gogo.ru", "q"],
    ["_addOrganic","gde.ru", "keywords"],
    ["_addOrganic","quintura.ru", "request"],
    ['_trackPageview']
);
 
(function() {
 var ga = document.createElement('script');
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 ga.setAttribute('async', 'true');
 document.documentElement.firstChild.appendChild(ga);
})();</script> 	
</body>
</html>